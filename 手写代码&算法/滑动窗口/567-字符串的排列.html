<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    /**
     * 题目：https://leetcode.cn/problems/permutation-in-string/description/
     * https://leetcode.cn/problems/find-all-anagrams-in-a-string/solutions/9749/hua-dong-chuang-kou-tong-yong-si-xiang-jie-jue-zi-/?envType=study-plan-v2&envId=top-100-liked
     * 
     * 解法同 438-找到字符串中所有字母异位词，只需要调整结果处理（返回true or false）
     */ 

    var checkInclusion = function(s1, s2) {
      let need = {};
      let window = {};

      for (let c of s1) {
        need[c] = need[c] ? need[c] + 1 : 1;
      }

      let l = 0;
      let r = 0;
      let valid = 0;

      while (r < s2.length) {
        let rightCr = s2[r];
        r++;

        if (need[rightCr]) {
          window[rightCr] = window[rightCr] ? window[rightCr] + 1 : 1;
          if (window[rightCr] === need[rightCr]) {
            valid++;
          }
        }

        while (r - l >= s1.length) {
          if (valid === Object.keys(need).length) return true;

          let leftCr = s2[l];
          l++;

          if (need[leftCr]) {
            if (window[leftCr] === need[leftCr]) {
              valid--;
            }
            window[leftCr] = window[leftCr] ? window[leftCr] - 1 : 1;
          }
        }
      }

      return false;
    };
  </script>
</body>
</html>