<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    /**
     * https://leetcode.cn/problems/longest-substring-without-repeating-characters/solutions/3982/hua-dong-chuang-kou-by-powcai/?envType=study-plan-v2&envId=top-100-liked
     * 高赞评论，2020.07.04
     * 
     * 滑动窗口框架：
     * https://leetcode.cn/problems/find-all-anagrams-in-a-string/solutions/9749/hua-dong-chuang-kou-tong-yong-si-xiang-jie-jue-zi-/?envType=study-plan-v2&envId=top-100-liked
     * 
     * 滑动窗口是一种 双指针区间动态扩张/收缩 的思路，通常解决：
     *  - 子数组 / 子串问题
     *  - 最长 / 最短区间问题
     *  - 满足某些约束的窗口问题
     * 
     * 基本套路：
     *  1. 用两个指针 left 和 right 表示窗口 [left, right)
     *  2. 移动 right 扩大窗口（移动完更新窗口数据），直到窗口不满足条件；之后检查合法性，是否需要收缩左窗口
     *  3. 移动 left 收缩窗口（移动完更新窗口数据），直到窗口再次满足条件
     *  4. 更新结果
     */

    var lengthOfLongestSubstring = function(s) {
      /**
       * 滑动窗口：
       *  - right 向右扩张窗口
       *  - left 向右收缩窗口
       *  - 用 obj 统计窗口内字符出现次数
       */
      let left = 0;         // 左指针
      let right = 0;        // 右指针
      let max = 0;          // 记录最大长度
      let obj = {};         // 记录窗口内每种字符出现的次数

      while (right < s.length) {
        // 1. 扩张窗口：将 s[right] 加入窗口
        let rightCr = s[right];
        right++;

        obj[rightCr] = obj[rightCr] ? obj[rightCr] + 1 : 1;

        // 2. 如果加入 rightCr 后，使得窗口出现重复字符，则收缩窗口
        while (obj[rightCr] > 1) {
          let leftCr = s[left];
          left++;  // 左指针右移，缩小窗口

          // 移除窗口左边字符
          obj[leftCr] = obj[leftCr] ? obj[leftCr] - 1 : 1;
        }

        // 3. 此时窗口内无重复字符，可以更新最大长度
        max = Math.max(max, right - left);
      }

      return max;
    };
  </script>
</body>
</html>